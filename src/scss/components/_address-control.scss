/* Address Control Specific Styles */
@use '../abstracts' as *;

/* Address Field Styling */
.address-field {
  position: relative;
  
  &.address-format-single {
    .address-input {
      width: 100%;
      padding: $space-3;
      border: 1px solid $border-light;
      border-radius: $radius-md;
      font-size: $font-size-base;
      background-color: $white;
      transition: $transition-base;
      
      &:focus {
        outline: none;
        border-color: $primary;
        box-shadow: $shadow-focus;
      }
      
      &::placeholder {
        color: $text-light;
      }
    }
  }
  
  &.address-format-multi {
    .address-line {
      margin-bottom: $space-3;
      
      &:last-child {
        margin-bottom: 0;
      }
      
      input {
        width: 100%;
        padding: $space-3;
        border: 1px solid $border-light;
        border-radius: $radius-md;
        font-size: $font-size-base;
        background-color: $white;
        transition: $transition-base;
        
        &:focus {
          outline: none;
          border-color: $primary;
          box-shadow: $shadow-focus;
        }
      }
    }
  }
  
  &.address-format-structured {
    .address-structured {
      display: grid;
      gap: $space-3;
      grid-template-columns: 1fr;
      
      @media (min-width: 768px) {
        grid-template-columns: 2fr 1fr 1fr;
        grid-template-areas: 
          "street street street"
          "city state zip"
          "country country country";
      }
      
      .address-street {
        grid-area: street;
      }
      
      .address-city {
        grid-area: city;
      }
      
      .address-state {
        grid-area: state;
      }
      
      .address-zip {
        grid-area: zip;
      }
      
      .address-country {
        grid-area: country;
      }
      
      input, select {
        width: 100%;
        padding: $space-3;
        border: 1px solid $border-light;
        border-radius: $radius-md;
        font-size: $font-size-base;
        background-color: $white;
        transition: $transition-base;
        
        &:focus {
          outline: none;
          border-color: $primary;
          box-shadow: $shadow-focus;
        }
      }
    }
  }
}

/* Address Autocomplete Styling */
.address-autocomplete {
  position: relative;
  
  .autocomplete-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: $white;
    border: 1px solid $border-light;
    border-top: none;
    border-radius: 0 0 $radius-md $radius-md;
    box-shadow: $shadow-lg;
    max-height: 200px;
    overflow-y: auto;
    z-index: $z-dropdown;
    
    .suggestion-item {
      padding: $space-3;
      cursor: pointer;
      border-bottom: 1px solid $border-light;
      transition: $transition-base;
      
      &:last-child {
        border-bottom: none;
      }
      
      &:hover {
        background-color: $light-gray;
      }
      
      &.selected {
        background-color: $primary-light;
        color: $primary;
      }
      
      .suggestion-main {
        font-weight: $font-weight-medium;
        color: $text-heading;
      }
      
      .suggestion-secondary {
        font-size: $font-size-sm;
        color: $text-secondary;
        margin-top: $space-1;
      }
    }
  }
}

/* Address Validation Styling */
.address-field {
  &.address-valid {
    .address-input,
    .address-line input,
    .address-structured input,
    .address-structured select {
      border-color: $success;
      background-color: rgba($success, 0.05);
    }
    
    &::after {
      content: '‚úì';
      position: absolute;
      right: $space-3;
      top: 50%;
      transform: translateY(-50%);
      color: $success;
      font-weight: bold;
      font-size: $font-size-lg;
    }
  }
  
  &.address-invalid {
    .address-input,
    .address-line input,
    .address-structured input,
    .address-structured select {
      border-color: $danger;
      background-color: rgba($danger, 0.05);
    }
    
    &::after {
      content: '‚úó';
      position: absolute;
      right: $space-3;
      top: 50%;
      transform: translateY(-50%);
      color: $danger;
      font-weight: bold;
      font-size: $font-size-lg;
    }
  }
  
  .address-validation-message {
    margin-top: $space-2;
    font-size: $font-size-sm;
    
    &.validation-error {
      color: $danger;
    }
    
    &.validation-success {
      color: $success;
    }
    
    &.validation-info {
      color: $info;
    }
  }
}

/* Address Field Labels */
.address-field-label {
  display: block;
  margin-bottom: $space-2;
  font-weight: $font-weight-medium;
  color: $text-primary;
  font-size: $font-size-sm;
  
  .required-indicator {
    color: $danger;
    margin-left: $space-1;
  }
}

/* Address Field Loading State */
.address-field {
  &.address-loading {
    position: relative;
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba($white, 0.8);
      z-index: 1;
      border-radius: $radius-md;
    }
    
    &::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      border: 2px solid $border-light;
      border-top-color: $primary;
      border-radius: 50%;
      animation: rotation 1s linear infinite;
      z-index: 2;
    }
  }
}

/* Address Icon Styling */
.address-field-icon {
  position: absolute;
  left: $space-3;
  top: 50%;
  transform: translateY(-50%);
  color: $text-secondary;
  font-size: $font-size-base;
  z-index: 1;
  
  & + .address-input,
  & + .address-line input {
    padding-left: calc(#{$space-3} + 20px + #{$space-2});
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .address-field {
    &.address-format-structured {
      .address-structured {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "street"
          "city"
          "state"
          "zip"
          "country";
      }
    }
  }
  
  .address-autocomplete {
    .autocomplete-suggestions {
      max-height: 150px;
      
      .suggestion-item {
        padding: $space-2;
        
        .suggestion-main {
          font-size: $font-size-sm;
        }
        
        .suggestion-secondary {
          font-size: 0.75rem;
        }
      }
    }
  }
}

/* Address Field in Form Builder Toolbar */
.react-form-builder .react-form-builder-toolbar {
  ul li {
    &[data-element-type="address"]::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: linear-gradient(to bottom, #17a2b8, #138496);
    }
    
    &[data-element-type="address"]:hover {
      background: linear-gradient(135deg, #d1ecf1, #bee5eb);
      border-color: #17a2b8;
    }
    
    &[data-element-type="address"] i.fa-map-marker-alt {
      color: #17a2b8;
    }
  }
}

/* Element type indicator for address */
.element-type-indicator.address {
  background-color: #17a2b8;
}

/* Address field specific form group styling */
.address-specific-fields {
  background-color: #e8f4f8;
  border-left: 4px solid #17a2b8;
  
  h4 {
    color: #17a2b8;
    border-bottom-color: #17a2b8;
    
    &::before {
      content: 'üìç ';
    }
  }
}